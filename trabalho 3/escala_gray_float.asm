.data
color:	.word	0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x181313, 0x141614, 0x565651, 0x9C9484, 0x7D7970, 0x000000, 0x000000, 0x211C19, 0x1C1918, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x201C1A, 0x000000, 0x77695A, 0xE0D1B6, 0xE3D7BB, 0xE2D6BE, 0xD2C5AC, 0x726D64, 0x000000, 0x000000, 0x1F1C1A, 0x151112, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x1B1515, 0x060E10, 0x39261F, 0xC0A289, 0xDCCEB2, 0xE5D5B6, 0xFFE5BF, 0xFDE3BF, 0xC5B8A2, 0x343634, 0x000000, 0x1E1B19, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171413, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x1A1515, 0x00050C, 0x3D2D25, 0xB4907B, 0xBB9A84, 0xE0B89B, 0xD0B095, 0xFFDFB8, 0xFFE6BE, 0xE7CFAE, 0x46433B, 0x000000, 0x1C1817, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x191514, 0x0F090C, 0x36322F, 0x57463E, 0x7F5244, 0x795246, 0x786857, 0xCBAF93, 0xFFE3BC, 0xA2927C, 0x000000, 0x27211E, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x1D1A1A, 0x151111, 0x171414, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x161213, 0x191515, 0x030000, 0x000000, 0x00000A, 0x031012, 0x000000, 0x58544C, 0xFBD7B2, 0xEFCEAB, 0x43413B, 0x000000, 0x1D1918, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x4C453C, 0x000000, 0x1C1817, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x1A1615, 0x1C1716, 0x1E1716, 0x1C1716, 0x27201D, 0x000000, 0xD5B898, 0xFFDDB4, 0xC0A68C, 0x000000, 0x251F1C, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x6B5F51, 0x000000, 0x1F1B19, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x161212, 0x241F1C, 0x000000, 0xAD967D, 0xF8DFBA, 0xFBE7C1, 0x6F6A5D, 0x000000, 0x221E1C, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xA7947D, 0x000000, 0x2A1C1A, 0x221314, 0x1E1515, 0x221D1A, 0x241E1C, 0x241F1C, 0x1F1B1A, 0x181514, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x221E1B, 0x000000, 0x92846E, 0xDDB49A, 0xD49280, 0xD9C9AD, 0x0F1319, 0x17100F, 0x181514, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xF0CCA8, 0x75695A, 0x000000, 0x001916, 0x00070A, 0x000000, 0x000000, 0x000000, 0x000000, 0x161211, 0x221E1C, 0x171313, 0x161213, 0x171313, 0x171313, 0x211C1A, 0x000000, 0x7C7967, 0xDB8876, 0xCC524E, 0xFFEBC5, 0x948773, 0x000000, 0x241F1C, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xF6CDA7, 0xE7B799, 0xAA1122, 0x831E22, 0x5D2C29, 0x806F5D, 0x9B856F, 0x907E6A, 0x665D50, 0x101115, 0x000000, 0x1C1716, 0x1F1A18, 0x231D1A, 0x211C1A, 0x201B19, 0x000000, 0x6E5E4E, 0xF6DBB6, 0xD6C6A9, 0xD6C3A6, 0xD8C1A1, 0x232220, 0x120C0D, 0x191515, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xF4C9A3, 0xEAB89A, 0xF42B38, 0xFF0D2B, 0xE1645B, 0xFAD4AF, 0xFFD8B2, 0xFFE1BE, 0xFBE5C2, 0xDCCBAF, 0x867E6E, 0x000000, 0x000000, 0x000000, 0x000000, 0x211B18, 0x000000, 0x68584A, 0xDCC2A2, 0xC0B298, 0xC0B096, 0xEBCEAC, 0x7B6C5C, 0x000000, 0x211C1A, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xF3C4A2, 0xE6B194, 0xE32330, 0xF30025, 0xDB6358, 0xEFCBA7, 0xF5D1AE, 0xD5B995, 0xAEA685, 0x89B88F, 0xE5CBA8, 0xCCBC9F, 0xB8A38A, 0xAA957B, 0x7B6E5F, 0x000D11, 0x000000, 0x655045, 0xEEC5A4, 0xE0BE9E, 0xF1C8A4, 0xFFD4AF, 0xAC917A, 0x000000, 0x241E1B, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0xEFBF9E, 0xE1A088, 0xEE0E29, 0xFC132B, 0xDF6058, 0xF4CAA7, 0xF9CBA7, 0xDEB996, 0x97A97E, 0x63A67B, 0xC49F76, 0xA27697, 0xC19E90, 0xF0C19B, 0xE8AD93, 0xC59F84, 0x5B4D45, 0x210408, 0xECAF8E, 0xFFCCA9, 0xF4C4A2, 0xFDCAA6, 0xC19C81, 0x000000, 0x221C19, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0xEDC29F, 0xDD8675, 0xF70024, 0xFF2030, 0xDF4D4A, 0xEBBF9E, 0xF6C4A2, 0xE9BE9F, 0xAFB594, 0xA5AB83, 0xC29C81, 0xA06CA1, 0xCDB295, 0xDEA88B, 0xBF3F35, 0xD7AD8B, 0xDEBC9A, 0xB49C82, 0xCC9E82, 0xE6AF91, 0xF0BC9B, 0xF7BF9F, 0xC7977D, 0x000000, 0x1F1917, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313, 0xE1B999, 0xDD5853, 0xFC122A, 0xFE2834, 0xEA2C35, 0xE2AB8F, 0xF1BC9C, 0xDCB695, 0xC38072, 0xC79D79, 0xA17E86, 0x9F6A98, 0xC8B68E, 0xD17258, 0xCB6655, 0x85A67B, 0x87A377, 0xFED4AD, 0xECCFAD, 0xD4AD8F, 0xEDB192, 0xEEB292, 0xCB9376, 0x0B1012, 0x181313, 0x181414, 0x171313, 0x171313, 0x171313, 0x171313, 0xD6A287, 0xEE2834, 0xFD2533, 0xFC2B36, 0xF60027, 0xDA8B77, 0xEBB99A, 0xD8A98C, 0xDAAA90, 0xB08A6D, 0xA28881, 0xA69A97, 0xBCB090, 0xD0AA8D, 0xCCA78B, 0x69AC7A, 0x9CA77F, 0xECCFAE, 0xFBD9B3, 0xF9CCA7, 0xEAB497, 0xE7AB8B, 0xECC29F, 0x4B4239, 0x000000, 0x1C1816, 0x171313, 0x171313, 0x171313, 0x171313, 0xCA6D60, 0xFD0D29, 0xFB2A35, 0xFA2934, 0xF0182B, 0xE04344, 0xDCAA8B, 0xE9AA8A, 0xE0A585, 0xCD9476, 0xBC987F, 0xBB9C86, 0xE1B394, 0xEECBAA, 0xCFA98B, 0xB2AA87, 0xBAA37A, 0xF2D3AA, 0xFFDCB5, 0xFDCCA8, 0xF3B595, 0xF4B594, 0xD0A386, 0x231F1C, 0x120E10, 0x191514, 0x171313, 0x171313, 0x171313, 0x171313, 0xE32934, 0xFE2533, 0xFC2734, 0xF42432, 0xEB2631, 0xFD102B, 0xD15A4F, 0xD99F7B, 0xE39F7C, 0xB47F69, 0xB98067, 0xA07058, 0x9C6B54, 0xAB765D, 0xB88971, 0xB78973, 0x987F6A, 0xAD967C, 0xB19277, 0xAA806A, 0x996E58, 0x735444, 0x1E1312, 0x000009, 0x1B1615, 0x161313, 0x171313, 0x171313, 0x171313, 0x171313, 0xF22431, 0xFB2633, 0xFE2634, 0xEC2230, 0xF02330, 0xFF2B37, 0xDF0524, 0xA2463B, 0xBB7863, 0xAF6153, 0x4A2A27, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x131112, 0x1A1615, 0x161212, 0x171313, 0x171313, 0x171313, 0x171313, 0x171313
buffer:	.space	32
grays:	.word	0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x151515, 0x545454, 0x929292, 0x777777, 0x000000, 0x000000, 0x1C1C1C, 0x191919, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x1C1C1C, 0x000000, 0x686868, 0xCECECE, 0xD3D3D3, 0xD3D3D3, 0xC2C2C2, 0x6C6C6C, 0x000000, 0x000000, 0x1C1C1C, 0x121212, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x161616, 0x0C0C0C, 0x292929, 0xA3A3A3, 0xCACACA, 0xD1D1D1, 0xE2E2E2, 0xE0E0E0, 0xB5B5B5, 0x353535, 0x000000, 0x1B1B1B, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x161616, 0x050505, 0x2F2F2F, 0x939393, 0x9C9C9C, 0xBABABA, 0xB1B1B1, 0xDDDDDD, 0xE2E2E2, 0xCCCCCC, 0x414141, 0x000000, 0x181818, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x151515, 0x0B0B0B, 0x323232, 0x484848, 0x595959, 0x585858, 0x676767, 0xAFAFAF, 0xE0E0E0, 0x909090, 0x000000, 0x212121, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x1A1A1A, 0x121212, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x131313, 0x161616, 0x000000, 0x000000, 0x020202, 0x0D0D0D, 0x000000, 0x535353, 0xD6D6D6, 0xCDCDCD, 0x404040, 0x000000, 0x191919, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x444444, 0x000000, 0x181818, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x161616, 0x181818, 0x181818, 0x181818, 0x212121, 0x000000, 0xB7B7B7, 0xDBDBDB, 0xA6A6A6, 0x000000, 0x1F1F1F, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x5E5E5E, 0x000000, 0x1B1B1B, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x131313, 0x1F1F1F, 0x000000, 0x959595, 0xDCDCDC, 0xE2E2E2, 0x686868, 0x000000, 0x1E1E1E, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x939393, 0x000000, 0x1F1F1F, 0x171717, 0x171717, 0x1D1D1D, 0x1F1F1F, 0x1F1F1F, 0x1B1B1B, 0x151515, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x1E1E1E, 0x000000, 0x828282, 0xB7B7B7, 0x9E9E9E, 0xC6C6C6, 0x131313, 0x111111, 0x151515, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0xCCCCCC, 0x686868, 0x000000, 0x121212, 0x060606, 0x000000, 0x000000, 0x000000, 0x000000, 0x121212, 0x1E1E1E, 0x141414, 0x131313, 0x141414, 0x141414, 0x1C1C1C, 0x000000, 0x757575, 0x989898, 0x6F6F6F, 0xE6E6E6, 0x858585, 0x000000, 0x1F1F1F, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0xCDCDCD, 0xBBBBBB, 0x3B3B3B, 0x383838, 0x373737, 0x6E6E6E, 0x858585, 0x7D7D7D, 0x5C5C5C, 0x111111, 0x000000, 0x181818, 0x1A1A1A, 0x1D1D1D, 0x1C1C1C, 0x1B1B1B, 0x000000, 0x5E5E5E, 0xD8D8D8, 0xC2C2C2, 0xC0C0C0, 0xBEBEBE, 0x212121, 0x0D0D0D, 0x161616, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0xCACACA, 0xBDBDBD, 0x606060, 0x515151, 0x818181, 0xD4D4D4, 0xD8D8D8, 0xDFDFDF, 0xE1E1E1, 0xC8C8C8, 0x7C7C7C, 0x000000, 0x000000, 0x000000, 0x000000, 0x1B1B1B, 0x000000, 0x585858, 0xC0C0C0, 0xAFAFAF, 0xADADAD, 0xCCCCCC, 0x6B6B6B, 0x000000, 0x1C1C1C, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0xC7C7C7, 0xB7B7B7, 0x565656, 0x464646, 0x7E7E7E, 0xCBCBCB, 0xD1D1D1, 0xB7B7B7, 0x9F9F9F, 0xA2A2A2, 0xC8C8C8, 0xB8B8B8, 0xA2A2A2, 0x939393, 0x6D6D6D, 0x0A0A0A, 0x000000, 0x525252, 0xC7C7C7, 0xBEBEBE, 0xC9C9C9, 0xD5D5D5, 0x929292, 0x000000, 0x1E1E1E, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0xC2C2C2, 0xAAAAAA, 0x4C4C4C, 0x535353, 0x7D7D7D, 0xCBCBCB, 0xCDCDCD, 0xB9B9B9, 0x999999, 0x8A8A8A, 0x9E9E9E, 0x898989, 0xA3A3A3, 0xC3C3C3, 0xB5B5B5, 0xA1A1A1, 0x4E4E4E, 0x0C0C0C, 0xB6B6B6, 0xD0D0D0, 0xC7C7C7, 0xCDCDCD, 0x9E9E9E, 0x000000, 0x1C1C1C, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0xC4C4C4, 0x979797, 0x464646, 0x5B5B5B, 0x707070, 0xC1C1C1, 0xC8C8C8, 0xC1C1C1, 0xABABAB, 0x9F9F9F, 0x9E9E9E, 0x868686, 0xB1B1B1, 0xAEAEAE, 0x5C5C5C, 0xAFAFAF, 0xBCBCBC, 0x9B9B9B, 0xA2A2A2, 0xB5B5B5, 0xC0C0C0, 0xC5C5C5, 0x9C9C9C, 0x000000, 0x1A1A1A, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414, 0xBBBBBB, 0x787878, 0x525252, 0x606060, 0x5D5D5D, 0xB1B1B1, 0xC1C1C1, 0xB7B7B7, 0x8D8D8D, 0x9E9E9E, 0x888888, 0x828282, 0xB0B0B0, 0x838383, 0x7B7B7B, 0x939393, 0x919191, 0xD4D4D4, 0xCDCDCD, 0xAFAFAF, 0xB8B8B8, 0xB9B9B9, 0x999999, 0x0F0F0F, 0x141414, 0x151515, 0x141414, 0x141414, 0x141414, 0x141414, 0xA8A8A8, 0x5C5C5C, 0x5E5E5E, 0x626262, 0x474747, 0x999999, 0xBDBDBD, 0xADADAD, 0xAFAFAF, 0x8C8C8C, 0x8C8C8C, 0x9C9C9C, 0xABABAB, 0xACACAC, 0xA9A9A9, 0x8E8E8E, 0x9A9A9A, 0xCECECE, 0xD8D8D8, 0xCECECE, 0xBABABA, 0xB2B2B2, 0xC3C3C3, 0x424242, 0x000000, 0x181818, 0x141414, 0x141414, 0x141414, 0x141414, 0x818181, 0x505050, 0x616161, 0x606060, 0x525252, 0x6A6A6A, 0xAEAEAE, 0xB1B1B1, 0xABABAB, 0x9A9A9A, 0x9A9A9A, 0x9E9E9E, 0xB6B6B6, 0xCBCBCB, 0xABABAB, 0xA3A3A3, 0x9E9E9E, 0xD0D0D0, 0xDBDBDB, 0xCFCFCF, 0xBCBCBC, 0xBCBCBC, 0xA7A7A7, 0x1F1F1F, 0x0F0F0F, 0x151515, 0x141414, 0x141414, 0x141414, 0x141414, 0x5A5A5A, 0x5E5E5E, 0x5F5F5F, 0x5B5B5B, 0x5A5A5A, 0x525252, 0x757575, 0xA4A4A4, 0xA7A7A7, 0x868686, 0x888888, 0x767676, 0x717171, 0x7D7D7D, 0x8E8E8E, 0x8F8F8F, 0x808080, 0x959595, 0x939393, 0x858585, 0x737373, 0x575757, 0x151515, 0x020202, 0x171717, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x5A5A5A, 0x5E5E5E, 0x5F5F5F, 0x585858, 0x595959, 0x636363, 0x434343, 0x5A5A5A, 0x838383, 0x717171, 0x313131, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x000000, 0x111111, 0x161616, 0x131313, 0x141414, 0x141414, 0x141414, 0x141414, 0x141414
red:	.double	0.299
green:	.double	0.587
blue:	.double  0.114
.text
	#carga de endereços dos rótulos de dados para os registratores s0,s1 e s2
	la	s0, color
	la	s1, buffer
	la	s2, grays
		
loopc:
	lw	a0, (s0) #carrega dado do s0
	addi	s0, s0, 4 #anda com o endereço
	
	#isola a informação de red de a0
        srli    a1, a0, 16	#isola a informação de red de a0 e guarda em a1
        lui     a2, %hi(red)	#carrega endereço do rótulo red=0.299
        fld     ft0, red,a2	#guarda em ft0 o valor de red
        srli    a2, a0, 8
        andi    a1, a1, 255	
        fcvt.d.w        ft1, a1	#converte o valor em a1 para double
        
        lui     a1, %hi(green)
        fld     ft2, green,a1
        fmul.d  ft0, ft1, ft0	#ft0=0.299*double(a1)
        andi    a1, a2, 255
        fcvt.d.w        ft1, a1
        fmul.d  ft1, ft1, ft2	#ft1=0.587*double(a1)
        
        lui     a1, %hi(blue)
        fld     ft2, blue,a1
        fadd.d  ft0, ft0, ft1	#ft0=ft0+ft1
        andi    a0, a0, 255
        fcvt.d.w        ft1, a0
        
        fmul.d  ft1, ft1, ft2	#ft1=ft1*ft2
        fadd.d  ft0, ft1, ft0	#ft0=ft1+ft0 (resultado do agoritmo)
        fcvt.s.d        ft0, ft0	#converte o resultado para float
        fcvt.w.s        a0, ft0, rtz	#converte o resultado para inteiro
        slli    a1, a0, 8
        or      a1, a1, a0
        slli    a0, a0, 16
        or      a0, a0, a1	#novo valor do pixel em escala de cinza
	
	sw	a0, (s1) #guarda a conversão em escala de cinza no s1
	addi	s1, s1, 4
	bne	s1, s2, loopc
verify:
	lw	t0, (s2)
	addi	s2, s2, 4
	lw	t1, (s1)
	addi	s1, s1, 4
	bne	t0, t1, error #verifica se os dados em buffer e grays são iguais
	bne	s1, s2, verify
	
ok:	li	a7, 10
	ecall
error:	li	a7,93
	li	a0,0x42
	ecall


